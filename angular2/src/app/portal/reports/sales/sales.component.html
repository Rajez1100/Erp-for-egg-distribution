<div class="wrapper wrapper-content animated fadeInRight padding-bottom-0">
	<div class="ibox-content m-b-sm border-bottom">
		<div class="row">
			<div class="col-sm-3">
				<div class="form-group">
					<label class="control-label" for="start_date_input">Start Date</label>
					<datetime [(ngModel)]="startDate" id="start_date_input" [timepicker]="false" [datepicker]="datepickerOptions"></datetime>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="form-group">
					<label class="control-label" for="end_date_input">End Date</label>
					<datetime [(ngModel)]="endDate" id="end_date_input" [timepicker]="false" [datepicker]="datepickerOptions"></datetime>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="form-group">
					<label class="control-label" for="sales_team_input">Sales Team</label>
					<ng-select allowClear="true" id="sales_team_input" [items]="salesTeams" [multiple]="false" (selected)="salesTeamChanged('changed', $event)"
						(removed)="salesTeamChanged('removed', $event)" placeholder="Select sales team">
					</ng-select>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="form-group">
					<label class="control-label" for="generate-btn" style="width: 100%;">&ensp;</label>
					<button (click)="getReport()" id="generate-btn" type="button" class="btn btn-info btn-sm">
						<span [hidden]="state == 'fetchingReport'">Generate Report</span>
						<span [hidden]="state != 'fetchingReport'">Generating Report <i class="fa fa-spinner fa-spin"></i></span>
					</button>&ensp;
					<span [hidden]="state != 'failedToFetchReport'" class="text-danger">Failed to generate. Try again ...</span>
				</div>
			</div>
		</div>
	</div>
</div>

<!--Summary-->
<div class="wrapper wrapper-content animated fadeInUp">
	<div class="row">
		<div class="col-md-12">
			<div class="ibox">
				<div class="ibox-content">
					<h2>Summary</h2>

					<div class="clients-list padded extra-pad-for-lg">
						<table class="table table-striped table-hover">
							<tbody>
								<!--Purchase-->
								<tr>
									<td class="client-avatar"></td>
									<td>
										<div class="row">
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Purchased Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['purchased_plates'] | Currency:0:currencyFormat:false}} trays.</span>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Purchase Cost</span>
													<span class="col-xs-5 colon-before">{{summary['cost_purchased'] | Currency:2:currencyFormat:true}}</span>
												</div>
											</div>
										</div>
									</td>
								</tr>

								<!--Damages-->
								<tr>
									<td class="client-avatar"></td>
									<td>
										<div class="row">
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Damaged Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['damaged_plates'] | Currency:0:currencyFormat:false}} trays.</span>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Estimated Cost of Damaged Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['cost_damaged'] | Currency:2:currencyFormat:true}}</span>
												</div>
											</div>
										</div>
									</td>
								</tr>

								<!--Sales-->
								<tr>
									<td class="client-avatar"></td>
									<td>
										<div class="row">
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Sold Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['sold_plates'] | Currency:0:currencyFormat:false}} trays.</span>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Cost of Sold Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['cost_sales'] | Currency:2:currencyFormat:true}}</span>
												</div>
											</div>
										</div>
									</td>
								</tr>

								<!--Unsold-->
								<tr>
									<td class="client-avatar"></td>
									<td>
										<div class="row">
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Unsold Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['unsold_plates'] | Currency:0:currencyFormat:false}} trays.</span>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Estimated Cost of Unsold Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['cost_unsold'] | Currency:2:currencyFormat:true}}</span>
												</div>
											</div>
										</div>
									</td>
								</tr>

								<!--Transfer Out-->
								<tr *ngIf="showSalesTeamSpecific">
									<td class="client-avatar"></td>
									<td>
										<div class="row">
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Outward Transfered Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['transfer_out_plates'] | Currency:0:currencyFormat:false}} trays.</span>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Estimated Cost of Out Trans Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['cost_transfer_out'] | Currency:2:currencyFormat:true}}</span>
												</div>
											</div>
										</div>
									</td>
								</tr>

								<!--Transfer In-->
								<tr *ngIf="showSalesTeamSpecific">
									<td class="client-avatar"></td>
									<td>
										<div class="row">
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Inward Transfered Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['transfer_in_plates'] | Currency:0:currencyFormat:false}} trays.</span>
												</div>
											</div>
											<div class="col-md-6">
												<div class="row">
													<span class="col-xs-7 display-label">Estimated Cost of In Trans Eggs</span>
													<span class="col-xs-5 colon-before">{{summary['cost_transfer_in'] | Currency:2:currencyFormat:true}}</span>
												</div>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
						<br/>

						<table class="table table-striped text-center">
							<tbody>
								<tr>
									<td class="display-label">Sales</td>
									<td class="display-label">Amount Collected</td>
									<td class="display-label">Outstanding</td>
									<td [innerText]="summary['cost_profit'] >= 0 ? 'Profit': 'Loss'" class="display-label"></td>
								</tr>
								<tr>
									<td>{{summary['cost_sales'] | Currency:2:currencyFormat:true}}</td>
									<td>{{summary['cost_collected'] | Currency:2:currencyFormat:true}}</td>
									<td><span class="label label-warning font-13">{{summary['cost_outstanding'] | Currency:2:currencyFormat:true}}</span></td>
									<td><span [ngClass]="{'label-primary': summary['cost_profit'] >= 0, 'label-danger':summary['cost_profit'] < 0}" class="label font-13">{{summary['cost_profit'] | Currency:2:currencyFormat:true}}</span></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>